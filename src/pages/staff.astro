---
import BaseLayout from "../layouts/BaseLayout.astro";
import PageHeader from "../components/Sections/PageHeader.astro";
import StaffList from "../components/Sections/StaffList.astro";
---

<BaseLayout
  title="Mentores - Alianza Vida Abundante"
  description="Meet our dedicated church staff and leadership team who serve our congregation con pasión y compromiso."
  transition:name="nav-trans"
>
  <PageHeader 
    title="Mentores" 
    subtitle="Conoce a nuestro equipo de mentores"
    backgroundImage="/uploads/page-header-bg.webp"
  />
  


  <!-- Contact Staff CTA -->
  <section class="py-16 bg-gray-50">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Quisiera tener un mentor</h2>
        <p class="text-lg text-gray-600 mb-8">
          Si estás interesado en recibir mentoría, por favor completa el siguiente formulario.
        </p>

<!-- JotForm Embed fijo -->
<div id="jotFormContainer" class="my-12 transition-all duration-300 ease-in-out">
  <iframe
    id="JotFormIFrame-252334873257866"
    title="Solicitud de Mentoría AVA"
    allow="geolocation; microphone; camera; fullscreen; payment"
    src="https://form.jotform.com/252334873257866"
    frameborder="0"
    style="min-width:100%;max-width:100%;border:none;min-height:80vh;"
    scrolling="no"
  ></iframe>
</div>

<!-- Scripts -->
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const FORM_SELECTOR = "iframe#JotFormIFrame-252334873257866";
    const JF_SRC = "https://cdn.jotfor.ms/s/umd/latest/for-form-embed-handler.js";

    async function ensureJotformScript() {
      if (typeof window.jotformEmbedHandler === "function") return;
      await new Promise((resolve, reject) => {
        const s = document.createElement("script");
        s.src = JF_SRC;
        s.async = true;
        s.onload = resolve;
        s.onerror = reject;
        document.head.appendChild(s);
      });
    }

    async function initJotform() {
      const el = document.querySelector(FORM_SELECTOR);
      if (!el) return;
      await ensureJotformScript();
      window.jotformEmbedHandler(FORM_SELECTOR, "https://form.jotform.com/");
    }

    // Ajuste de altura
    window.addEventListener("message", function(e) {
      if (!e || typeof e.data !== "string") return;
      const args = e.data.split(":");
      if (args[0] === "setHeight") {
        const iframe = document.querySelector(FORM_SELECTOR);
        if (iframe) iframe.style.height = args[1] + "px";
      }
    }, false);

    // Inicializar siempre al cargar la página
    initJotform();
  });
</script>


</BaseLayout>
